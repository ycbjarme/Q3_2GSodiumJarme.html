<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>View Sign-Ups</title>
<style>
  body { font-family: Arial, sans-serif; padding:20px; background: #fafafa; }
  table { width:100%; border-collapse:collapse; margin-top:15px; background: white; }
  th, td { border:1px solid #999; padding:10px; text-align:center; }
  th { background:#4CAF50; color: white; }
  .filter-container { background: #eee; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
  #total { font-weight: bold; font-size: 1.2em; color: #2c3e50; }
  .delete-btn { color: white; background: #e74c3c; border: none; padding: 5px 10px; cursor: pointer; border-radius: 3px; }
  .back-link { display: inline-block; margin-top: 20px; text-decoration: none; color: #008CBA; font-weight: bold; }
</style>
</head>
<body>

<h2>Club Sign-Ups Dashboard</h2>

<div class="filter-container">
  <label><strong>Filter by Club:</strong> 
    <select id="filter">
      <option value="ALL">Display All Clubs</option>
      <option>Bake Club</option><option>Kislap</option>
      <option>Karyo</option><option>Alianti</option><option>Exposure</option>
    </select>
  </label>
</div>

<table>
<thead>
  <tr>
    <th>Student ID</th>
    <th>Name</th>
    <th>Grade</th>
    <th>Club</th>
    <th>Action</th> 
  </tr>
</thead>
<tbody id="rows"></tbody>
</table>

<p id="total"></p>

<a href="index.html" class="back-link">‚Üê Back to Registration Form</a>

<script>
const KEY = "clubSignUps";


function loadData() {
  const raw = localStorage.getItem(KEY);
  return raw ? JSON.parse(raw) : [];
}


function render() {
  const rows = document.getElementById("rows");
  const total = document.getElementById("total");
  const filterValue = document.getElementById("filter").value;

  const data = loadData();
  rows.innerHTML = "";


  const list = filterValue === "ALL" ? data : data.filter(d => d.club === filterValue);

  if (data.length === 0) {
    total.textContent = "Database is currently empty.";
    return;
  }

  if (list.length === 0) {
    total.textContent = `No applications found for ${filterValue}.`;
    return;
  }


  list.forEach((d, index) => {
    rows.innerHTML += `
      <tr>
        <td>${d.studentId}</td>
        <td>${d.name}</td>
        <td>${d.grade}</td>
        <td>${d.club}</td>
        <td><button class="delete-btn" data-id="${d.id}">Remove</button></td>
      </tr>`;
  });


  total.textContent = "Total Sign-Ups Displayed: " + list.length;
}


document.getElementById("filter").onchange = render;


document.getElementById("rows").onclick = function(e) {
  if (e.target.tagName === "BUTTON") {
    if (!confirm("Are you sure you want to delete this record?")) return;
    
    const targetId = Number(e.target.dataset.id);
    let data = loadData();


    const realIndex = data.findIndex(item => item.id === targetId);

    if (realIndex !== -1) {
      data.splice(realIndex, 1); // Remove the item
      localStorage.setItem(KEY, JSON.stringify(data)); // Sync back to storage
      render(); // Refresh the view
    }
  }
};


render();
</script>
</body>
</html>
