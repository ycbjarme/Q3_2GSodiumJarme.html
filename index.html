<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Centralized Club Application</title>
<style>
  body { font-family: Arial, sans-serif; background:#f2f2f2; }
  form {
    width:600px; margin:30px auto; background:#fff;
    padding:20px; border-radius:8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  fieldset { margin-bottom:15px; border: 1px solid #ccc; padding: 10px; }
  legend { font-weight: bold; color: #333; }
  button { padding:8px 15px; margin:5px; cursor: pointer; }
  .btn-submit { background-color: #4CAF50; color: white; border: none; }
  .btn-view { background-color: #008CBA; color: white; border: none; }
</style>
</head>
<body>

<form id="clubForm">
  <fieldset>
    <legend>Personal Information</legend>
    <label>Student ID <input type="number" name="student_id" required></label><br>
    <label>Full Name <input type="text" name="full_name" required></label><br>
    <label>Birthday <input type="date" name="birthday" required></label><br>
    <label>Email <input type="email" name="email" required></label>
  </fieldset>

  <fieldset>
    <legend>Organization Information</legend>
    <label>Phone <input type="text" name="phone" required></label><br>
    <label>Grade
      <select name="grade" required>
        <option value="">Select</option>
        <option>Grade 7</option><option>Grade 8</option><option>Grade 9</option>
        <option>Grade 10</option><option>Grade 11</option><option>Grade 12</option>
      </select>
    </label><br>
    <label>
      <input type="radio" name="status" value="Intern" required> Intern
      <input type="radio" name="status" value="Extern" required> Extern
    </label><br>
    <label>Club
      <select name="club" required>
        <option value="">Select</option>
        <option>Bake Club</option><option>Kislap</option>
        <option>Karyo</option><option>Alianti</option><option>Exposure</option>
      </select>
    </label><br>
    <label>Reason<br><textarea name="reason" required></textarea></label>
  </fieldset>

  <button type="submit" class="btn-submit">Submit</button>
  <button type="button" class="btn-view" onclick="location.href='viewSignUps.html'">View Sign-Ups</button>
</form>

<script>
const KEY = "clubSignUps";

/**
 * Retrieves the application list from localStorage.
 * Converts the JSON string back into a JavaScript array.
 */
function loadData() {
  const raw = localStorage.getItem(KEY);
  return raw ? JSON.parse(raw) : [];
}

/**
 * Persists the application array to localStorage.
 * Converts the array into a JSON string for storage.
 */
function saveData(data) {
  localStorage.setItem(KEY, JSON.stringify(data));
}

document.getElementById("clubForm").onsubmit = function(e) {
  e.preventDefault();
  if (!confirm("Submit application?")) return;

  const f = e.target;
  
  // Creates a data object representing the student's submission.
  // Date.now() provides a unique identifier for secure deletion later.
  const obj = {
    id: Date.now(), 
    studentId: f.student_id.value,
    name: f.full_name.value,
    birthday: f.birthday.value,
    email: f.email.value,
    phone: f.phone.value,
    grade: f.grade.value,
    status: f.status.value,
    club: f.club.value,
    reason: f.reason.value
  };

  // Pull existing data, add the new entry, and save back to storage.
  const data = loadData();
  data.push(obj);
  saveData(data);

  alert("Application Saved Successfully!");
  f.reset();
};
</script>
</body>
</html>
